{{#slideout-pane
	headerProps=(hash title='Compose')
    footerComponent=constants.SLIDEOUT.FOOTER.ACTIONS
    footerProps=(hash
        showFooter=true
        doPrimary=(route-action "finishComposeSlideout")
        disablePrimary=(or (not composeMessage) (not composeHasRecipients))
        primaryLabel="Send"
        primaryProgressLabel="Sending...")
    doClose=(route-action "cancelComposeSlideout")
    forceKeepOpen=(or composeMessage composeHasRecipients)
    focusSelector='.multi-select-new-input' as |slideout|}}
	<div class="pad-t pad-l pad-r">
		{{#if model.phone.isFulfilled}}
			<div class="form-element">
				{{#multi-select data=model.phone.content.tags
			    	selected=composeRecipients
			    	displayProperty='identifier'
			    	identityProperty='uniqueIdentifier'
			    	doSearch=(route-action "composeDoSearch")
			    	doCreate=(route-action "composeCreateRecipient")
			    	onInsert=(route-action "composeInsertRecipient")
					onRemove=(route-action "composeRemoveRecipient") as |recipient select|}}
					<span class="horizontal-items">
						<span class="clear-badge">
							{{#if (eq recipient.constructor.modelName constants.MODEL.TAG)}}
								<span class="fa fa-tag"></span>
							{{else if (eq recipient.constructor.modelName constants.MODEL.CONTACT)}}
								{{#if recipient.isShared}}
									{{#tool-tip title=(concat 'Shared by ' recipient.sharedBy)}}
							            <span class="fa fa-share"></span>
							        {{/tool-tip}}
								{{else}}
									<span class="fa fa-user"></span>
								{{/if}}
							{{else}}
								<span class="fa fa-asterisk"></span>
							{{/if}}
						</span>
						<span class="clear-badge text-bold">
							{{phone-number recipient.identifier}}
							{{#if (eq recipient.constructor.modelName constants.MODEL.TAG)}}
								<span class="margin-l-half halo halo-sm bg-color bg-dark">
									{{recipient.numMembers}}
								</span>
							{{/if}}
						</span>
					</span>
				{{/multi-select}}
			</div>
		{{/if}}
		<div class="form-element">
			{{textarea rows="3"
				autoresize=true
				class="form-control"
				maxlength="320"
				remaining='bottom'
				value=composeMessage
				placeholder="Type your message here"}}
		</div>
	</div>
{{/slideout-pane}}
