<div class="content">
    {{#if tag}}
        {{#hide-away tabindex=false
            clickOutToClose=false
            bodyClickClose=false
            animation='slide'
            allowedTriggerSelectors='.pull-right' as |hideAway|}}
            <div class="input-group text-center">
                <div class="input-group-addon">
                    <button class="btn btn-plain btn-danger" type='button'
                    onclick={{hideAway.actions.close}}>
                        <span class="fa fa-trash"></span>
                    </button>
                </div>
                <div class="input-group-addon">
                    <button class="btn btn-plain" type='button'
                    onclick={{hideAway.actions.close}}>
                        <span class="fa fa-undo"></span>
                    </button>
                </div>
                <div class="input-group-addon">
                    <button class="btn btn-plain" type='button'
                    onclick={{hideAway.actions.close}}>
                        <span class="fa fa-save"></span>
                    </button>
                </div>
            </div>
            <div class="pad-all bg-color border-b">
                <div class="form-element">
                    <label for="Your Name">Tag Name</label>
                    {{input value=tag.name type="text" placeholder="Tag Name" class="form-control"}}
                </div>
                <div class="form-element">
                    <label for="Your Name">Tag Color</label>
                    {{color-input color=tag.color}}
                </div>
            </div>
        {{else}}
            <div class="section-header">
                <span class="indicator pull-left display-l"
                    style='background-color:{{tag.color}};'></span>
                <div class="tag-title">
                    <h4 class="text-ellipsis">
                        {{tag.name}}
                    </h4>
                    <p>{{tag.numMembers}} contacts</p>
                </div>
                <div class="pull-right">
                    <button class="btn btn-plain" type='button'>
                        <span class="fa fa-pencil"></span>
                    </button>
                </div>
            </div>
        {{/hide-away}}
    {{else}}
        {{#hide-away tabindex=false
            clickOutToClose=true
            bodyClickClose=true
            animation='slide'
            allowedTriggerSelectors='.pull-right' as |hideAway|}}
            <ul class="reset-list">
                {{#link-to 'main.contacts' tagName='li' classNames='menu-item'}}
                    <div class="offset-xs-row-10 xs-8-row-10 text-left">
                        <p class="text-bold text-ellipsis">All</p>
                    </div>
                {{/link-to}}
                <li class="menu-item">
                    <div class="offset-xs-row-10 xs-8-row-10 text-left">
                        <p class="text-bold text-ellipsis">Unread</p>
                    </div>
                </li>
                <li class="menu-item">
                    <div class="offset-xs-row-10 xs-8-row-10 text-left">
                        <p class="text-bold text-ellipsis">Archived</p>
                    </div>
                </li>
                <li class="menu-item">
                    <div class="offset-xs-row-10 xs-8-row-10 text-left">
                        <p class="text-bold text-ellipsis">Blocked</p>
                    </div>
                </li>
            </ul>
        {{else}}
            <div class="section-header">
                <div class="contacts-title">
                    <h4 class="text-ellipsis">All</h4>
                    <p>5 contacts</p>
                </div>
                <div class="pull-right display-l">
                    <button class="btn btn-plain" type='button'>
                        <span class="fa fa-filter"></span>
                    </button>
                </div>
            </div>
        {{/hide-away}}
    {{/if}}
    {{#infinite-scroll classNames='section-body'
        containerClass='result-list'
        direction='down'
        data=contacts
        total=numContacts
        doLoad=(action 'loadMore') as |contact index|}}
        <div class="result-item pad-t
            {{if (eq contact.status 'unread') 'unread'}}
            {{if (eq index 2) 'active'}}
         ">
            <div class="row">
                <div class="contacts-control">
                    {{#link-to (if tag
                            'main.tag.many'
                            'main.contacts.many')
                        bubbles=false}}
                        {{input type="checkbox" checked=contact.isSelected}}
                    {{/link-to}}
                </div>
                {{#link-to (if tag
                        'main.tag.contact'
                        'main.contacts.contact')
                    classNames="contacts-info clickable"
                    tagName="div"}}
                    <p class="emphasize">{{contact.name}}</p>
                    <p>{{contact.timeAgo}}</p>
                {{/link-to}}
            </div>
            <div class="contacts-tags">
                {{#if contact.isShared}}
                    <span class="badge">
                        Shared by <span class="text-darken">{{contact.sharedBy}}</span>
                    </span>
                {{else}}
                    {{#each contact.tags as |tag|}}
                        {{preview-badge color=tag.color content=tag.name}}
                    {{/each}}
                {{/if}}
            </div>
        </div>
    {{else}}
        <div class="no-results">No contacts match this criteria.</div>
    {{/infinite-scroll}}
</div>
{{outlet}}
