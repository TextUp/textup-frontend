{{title selectedContacts.length " selected"}}

<div class="details">
	<div class="section-header">
		<div class="horizontal-items xs-2-row-3 l-4-row-10 pull-left">
            {{!-- close button on smaller screens --}}
            <span class="clear-badge display-xs display-s no-space">
                <button class="btn btn-plain"
                    type="button"
                    onclick={{action "deselectAllContactsAndExit"}}>
                    <span class="icon-left-arrow"></span>
                </button>
            </span>
			<span class="clear-badge no-space">
                {{#pop-over as |popOver|}}
                    <button class="btn"
                        type="button"
                        onclick={{popOver.actions.toggle}}>
                        <span class="display-xs">{{selectedContacts.length}} selected</span>
                        <span class="display-s display-m display-l">Select</span>
                        <span class="icon-thin-down-arrow"></span>
                    </button>
                {{else}}
                    <ul class="dropdown">
                        <li tabindex="0"
                            class="dropdown-item"
                            onclick={{action "selectAllContacts"}}>
                            All
                        </li>
                        <li tabindex="0"
                            class="dropdown-item"
                            onclick={{action "selectAllMyContacts"}}>
                            My contacts
                        </li>
                        <li tabindex="0"
                            class="dropdown-item"
                            onclick={{action "deselectAllContactsAndExit"}}>
                            None
                        </li>
                    </ul>
                {{/pop-over}}
			</span>
            <span class="clear-badge display-s display-m display-l">
                {{#tool-tip title=(concat selectedContacts.length
                        " "
                        (pluralize "contact" selectedContacts.length)
                        " selected")
                    classNames="btn-expand"}}
                    <span class="text-bold">{{selectedContacts.length}}</span>
                    <span class="icon-person"></span>
                {{/tool-tip}}
        	</span>
            <span class="clear-badge display-s display-m display-l">
                {{#tool-tip title=(concat selectedAndSharedContacts.length " " "shared with me selected")
                    classNames="btn-expand"}}
                    <span class="text-bold">{{selectedAndSharedContacts.length}}</span>
                    <span class="fa fa-share fa-flip-horizontal"></span>
                {{/tool-tip}}
            </span>
		</div>
        {{#if selectedContacts}}
            <div class="horizontal-items xs-row-3 l-6-row-10 pull-right">
                {{!-- for all except large screens --}}
                <span class="clear-badge no-space display-xs display-s display-m">
                    {{#pop-over as |popOver|}}
                        <button class="btn"
                            type="button"
                            onclick={{popOver.actions.toggle}}>
                            Actions
                            <span class="icon-thin-down-arrow"></span>
                        </button>
                    {{else}}
                        <ul class="dropdown">
                            {{#if (or hasNoSharedContactsSelected canMessageSelectedContacts)}}
                                <li tabindex="0"
                                    class="dropdown-item"
                                    onclick={{service-action "slideout/composeService" "openSlideout" selectedContacts}}>
                                    Compose
                                </li>
                            {{/if}}
                            {{#if hasNoSharedContactsSelected}}
                                <li tabindex="0"
                                    class="dropdown-item"
                                    onclick={{service-action "slideout/tagMembershipService" "openSlideout" selectedContacts}}>
                                    Tags
                                </li>
                                <li tabindex="0"
                                    class="dropdown-item"
                                    onclick={{service-action "slideout/sharingService" "openSlideout" selectedContacts}}>
                                    Share
                                </li>
                            {{/if}}
                            {{#if (can-download)}}
                                <li tabindex="0"
                                    class="dropdown-item"
                                    onclick={{service-action "slideout/exportService" "startMultipleExportSlideout" selectedContacts}}>
                                    Export records
                                </li>
                            {{/if}}
                            <li class="dropdown-divider"></li>
                            {{status-list/contact contacts=selectedContacts
                                onChange=(service-action "contactService" "updateStatus" selectedContacts)}}
                        </ul>
                    {{/pop-over}}
                </span>
                {{!-- for large screens --}}
                <span class="clear-badge no-space display-l">
                    {{#pop-over as |popOver|}}
                        <button class="btn"
                            type="button"
                            onclick={{popOver.actions.toggle}}>
                            Status
                            <span class="icon-thin-down-arrow"></span>
                        </button>
                    {{else}}
                        <ul class="dropdown">
                            {{status-list/contact contacts=selectedContacts
                                onChange=(service-action "contactService" "updateStatus" selectedContacts)}}
                        </ul>
                    {{/pop-over}}
                </span>
                {{#if (or hasNoSharedContactsSelected canMessageSelectedContacts)}}
                    <span class="display-l clear-badge no-space">
                        <button class="btn btn-default"
                            type="button"
                            onclick={{service-action "slideout/composeService" "openSlideout" selectedContacts}}>
                            Compose
                        </button>
                    </span>
                {{/if}}
                {{#if hasNoSharedContactsSelected}}
                    <span class="display-l clear-badge no-space">
                        <button class="btn"
                            type="button"
                            onclick={{service-action "slideout/tagMembershipService" "openSlideout" selectedContacts}}>
                            Tags
                        </button>
                    </span>
                    <span class="display-l clear-badge no-space">
                        <button class="btn"
                            type="button"
                            onclick={{service-action "slideout/sharingService" "openSlideout" selectedContacts}}>
                            Share
                        </button>
                    </span>
                {{/if}}
                {{#if (can-download)}}
                    <span class="display-l clear-badge no-space">
                        <button class="btn"
                            type="button"
                            onclick={{service-action "slideout/exportService" "startMultipleExportSlideout" selectedContacts}}>
                            Export
                        </button>
                    </span>
                {{/if}}
                {{!-- close button on larger screens --}}
                <span class="clear-badge display-m display-l">
                    <button class="btn btn-plain"
                        type="button"
                        onclick={{action "deselectAllContactsAndExit"}}>
                        <span class="icon-x"></span>
                    </button>
                </span>
            </div>
        {{/if}}
    </div>
    <div class="section-body display-m display-l">
		<ul class="tile-list">
			{{#each selectedContacts as |contact|}}
				<li class="m-row-2 l-row-3">
					<div class="tile-list-item text-center">
                        {{#if contact.isShared}}
                            <span class="pull-left">
                                <span class="display-xs display-s display-m">
                                    <span class="badge text-smaller">Shared</span>
                                </span>
                                <span class="display-l">
                                    {{#tool-tip tagName="span"
                                        classNames="badge text-smaller"
                                        title=(concat (if contact.isDelegatePermission
                                            "Collaborating with "
                                            (if contact.isViewPermission "Viewing only from " "Shared by")) contact.sharedByName)}}
                                        Shared
                                    {{/tool-tip}}
                                </span>
                            </span>
                        {{/if}}
						{{phone-number contact.name}}
						<span class="pull-right">
                            <button class="btn btn-plain"
                                type="button"
                                onclick={{action "deselectContact" contact}}>
                                <span class="icon-x"></span>
                            </button>
                        </span>
					</div>
				</li>
            {{else}}
                <li class="no-results">No contacts selected.</li>
			{{/each}}
		</ul>
    </div>
</div>
