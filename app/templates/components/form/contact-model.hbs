{{#if contact.isShared}}
    <div class="bg-color margin-b border-radius-all
        pad-t pad-l pad-r pad-b-half">
        <p class='margin-b-half'>
            <span class="text-bold">
                {{phone-number contact.sharedBy}}
            </span>
            {{#if contact.isSharedDelegate}}
                has been collaborating with you on
            {{else if contact.isSharedView}}
                has allowed you to view
            {{else}}
                has shared
            {{/if}}
            <span class="text-bold">
                {{phone-number contact.identifier}}
            </span>
            since
            {{moment-from-now contact.startedSharing interval=10000}}
        </p>
    </div>
{{/if}}
<div class="form__group">
    {{#tour-components/hint hintId='contactsAddSupport'}}
    <label class="form__label" for="Name">Name</label>
    {{input value=contact.name
        validateObj=contact
        validateField='name'
        validate='bottom'
        disabled=(if (not contact.allowEdits) 'disabled')
        type="text" placeholder="Name" class="form__input start-focus"
        autocorrect="off"}}
        {{/tour-components/hint}}
</div>
<div class="form__group">
    <label class="form__label" for="Note">Note</label>
    {{textarea rows="3"
        placeholder="Enter notes here..."
        disabled=(if (not contact.allowEdits) 'disabled')
        autoresize=true
        class="form__input form__input--multiline"
        maxLength=1000
        validateObj=contact
        validateField='note'
        validate='bottom'
        value=contact.note}}
</div>
<div class="form__group">
    {{#tour-components/hint hintId='contactsLanguage'}}
        <div class="row">
            <div class="xs-2-row-3 control-text">
                <label class="form__label" for="Language">
                    Language
                </label>
            </div>
            <select name="contact-language" class="xs-row-3 form__input"
                onchange={{action (mut contact.language) value="target.value"}}
                disabled={{if (not contact.allowEdits) "disabled"}}>
                {{#each constants.LANGUAGES as |_lang|}}
                    <option value={{_lang}}
                        selected={{if (eq _lang contact.language) "selected"}}>
                        {{capitalize (lowercase _lang) 1}}
                    </option>
                {{/each}}
            </select>
        </div>
    {{/tour-components/hint}}
</div>
<div class="form__group">
    {{#tour-components/hint hintId='contactsNumbers'}}
    <label class="form__label" for="Numbers">Numbers</label>
    {{#if contact.numberDuplicates}}
        <div class="bg-color margin-b border-radius-all pad-t pad-l pad-r pad-b-half">
            {{#each contact.numberDuplicates as |dupObj|}}
                <p class='margin-b-half'>
                    <span class="text-bold">{{phone-number dupObj.number}}</span>
                    also belongs to
                    {{#each dupObj.duplicates as |dup|}}
                        <span class='link'
                            onclick={{action _onGoToDuplicates dup.id}}>
                            {{!-- tildes present to trim whitespace --}}
                            {{~phone-number dup.identifier ~}}
                        </span>
                        {{~if (eq dup.identifier dupObj.duplicates.lastObject.identifier) "." ", "}}
                    {{/each}}
                </p>
            {{/each}}
        </div>
    {{/if}}
    <!-- TODO: If contacts is clicked many times, this will cause the page to crash -->
    {{sortable-group/numbers numbers=contact.numbers
        readonly=(not contact.allowEdits)
        onAdd=(action _onAddNumber)
        onRemove=(action _onRemoveNumber)
        validateObj=contact
        validateField='numbers'
        validate='bottom'}}
        {{/tour-components/hint}}
</div>
