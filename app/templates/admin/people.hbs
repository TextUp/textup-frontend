{{#if team}}
    {{title team.name separator=' - '}}
{{/if}}

<div class="content">
	{{#hide-away tabindex=false
        clickOutToClose=true
        bodyClickClose=true
        animation='slide'
        allowedTriggerSelectors='.staff-filter' as |hideAway|}}
        <ul class="reset-list">
            <li class="menu-item {{if (eq filter 'active') 'active'}}"
                    {{action 'changeFilter' 'active'}}>
                <div class="offset-xs-row-10 xs-8-row-10 text-left">
                    <p class="text-bold text-ellipsis">Active</p>
                </div>
            </li>
            <li class="menu-item {{if (eq filter 'admins') 'active'}}"
                    {{action 'changeFilter' 'admins'}}>
                <div class="offset-xs-row-10 xs-8-row-10 text-left">
                    <p class="text-bold text-ellipsis">Admins</p>
                </div>
            </li>
            <li class="menu-item {{if (eq filter 'blocked') 'active'}}"
                    {{action 'changeFilter' 'blocked'}}>
                <div class="offset-xs-row-10 xs-8-row-10 text-left">
                    <p class="text-bold text-ellipsis">Blocked</p>
                </div>
            </li>
        </ul>
    {{else}}
        <div class="section-header">
        	{{#if team}}
                <span class="display-l">
                    <span class="indicator pull-left"
                        style='background-color:{{team.hexColor}};'></span>
                </span>
                <div class="tag-title">
                    <h4 class="text-ellipsis">
                        {{team.name}}
                    </h4>
                    <p>
                        {{numPeople}}
                        {{pluralize 'person' numPeople}}
                    </p>
                </div>
                {{#if (not team.isDeleted)}}
                    {{#link-to 'admin.team.edit' classNames='pull-right' tagName='div'}}
                        <button class="btn btn-plain" type='button'>
                            <span class="fa fa-pencil"></span>
                        </button>
                    {{/link-to}}
                {{/if}}
        	{{else}}
        		<div class="contacts-title">
	                <h4 class="text-ellipsis">{{capitalize filter}}</h4>
	                <p>
                        {{numPeople}}
                        {{pluralize 'person' numPeople}}
                    </p>
	            </div>
	            <div class="staff-filter pull-right display-l">
	                <button class="btn btn-plain" type='button'>
	                    <span class="fa fa-filter"></span>
	                </button>
	            </div>
        	{{/if}}
        </div>
    {{/hide-away}}
    {{#infinite-scroll classNames='section-body bg-color bg-dark'
        containerClass='bg-color bg-lightest'
        itemsClass='result-list'
        direction='down'
        data=people
        total=numPeople
        doLoad=(action 'loadMore')
        doRefresh=(action 'refresh') as |person|}}
        <div class="result-item">
            <div class="row">
                <div class="contacts-control {{if person.isSelected 'selected'}}"
                    {{action 'toggleSelected' person preventDefault=false}}>
                    <span class="fa fa-check center"></span>
                </div>
                {{#link-to (if team
                        'admin.team.person'
                        'admin.people.person')
                    person.id
                    classNames="contacts-info"
                    tagName="div"}}
                    <p class="emphasize">
                        <span class="margin-r-half">
                            {{person.name}}
                        </span>
                        <span class="clear-badge no-space">
                            {{partial 'partials/staff/indicators'}}
                        </span>
                    </p>
                    <p>{{person.username}}</p>
                {{/link-to}}
            </div>
            {{#if person.teams}}
                <div class="contacts-tags">
                    {{#each person.teams as |team|}}
                        {{#preview-badge color=team.hexColor
                            content=team.name as |badge|}}
                        {{else}}
                            {{#if team.phone}}
                                <span class="fa fa-phone"></span>
                            {{/if}}
                        {{/preview-badge}}
                    {{/each}}
                </div>
            {{/if}}
        </div>
    {{else}}
        <div class="no-results">No people match this criteria.</div>
    {{/infinite-scroll}}
</div>
{{outlet}}
