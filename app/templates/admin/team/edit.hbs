{{title 'Edit'}}

<div class="details full-height">
	<div class="section-header">
		<span class="pull-left">
			<div class="horizontal-items">
				<div class="clear-badge display-xs display-s no-space">
					{{#link-to 'admin.team'}}
						<span class="pad-all">
							<span class="fa fa-chevron-left"></span>
						</span>
		        	{{/link-to}}
				</div>
				<div class="clear-badge no-space">
					<h5>{{team.name}}</h5>
				</div>
				<div class="badge margin-l">
					{{team.numMembers}}
					<span class="fa fa-user"></span>
				</div>
			</div>
		</span>
		<span class="pull-right pad-r display-m display-l">
			{{#link-to 'admin.team'}}
				<span class="pad-all">
					<span class="fa fa-times"></span>
				</span>
        	{{/link-to}}
		</span>
    </div>
    {{#if (and team.isDeleted team.hasDirtyAttributes)}}
		<div class="section-body bg-color">
			<div class="center">
				<p>{{team.name}} is about to be deleted.</p>
				<div class="horizontal-items text-center margin-t-double margin-b">
			        <div class="clear-badge no-space">
			            <button class="btn btn-plain" type='button'
			                onclick={{route-action 'revert' team}}>
			                Undo
			            </button>
			        </div>
			        <div class="clear-badge no-space">
			        	{{async-button classNames='btn btn-plain btn-danger'
		                    disableWhen=(not (v-get newContact 'isValid'))
		                    action=(route-action 'deleteTeam' team)
		                    default='Delete'
		                    pending='Deleting...'}}
			        </div>
			    </div>
			</div>
		</div>
	{{else if team.isDeleted}}
		<div class="section-body bg-color">
			<div class="center">
				<p>{{team.name}} has been deleted.</p>
			</div>
		</div>
    {{else}}
    	<div class="section-body bg-color bg-lightest">
		    <div class="pad-t">
		    	{{#with team as |newTeam|}}
		    		{{partial 'partials/team/create-edit'}}
		    	{{/with}}
		    </div>
		    <div>
		    	{{v-get team 'messages'}}
		    </div>
	    	{{#if (or team.hasDirtyAttributes team.hasManualChanges)}}
	    		<div class="form-element horizontal-items text-center">
			        <div class="clear-badge no-space">
			            <button class="btn" type='button'
			                onclick={{route-action 'revert' team}}>
			                Cancel
			            </button>
			        </div>
			        <div class="clear-badge no-space">
			            {{async-button classNames='btn btn-default'
	                        disableWhen=(not (v-get team 'isValid'))
	                        action=(route-action 'persist' team)
	                        default='Update'
	                        pending='Updating...'}}
			        </div>
			    </div>
	    	{{/if}}
	    	{{#with team as |owner|}}
	    		{{partial 'partials/location'}}
	    	{{/with}}
	    </div>
    {{/if}}
</div>
